#!/usr/bin/python3
# app.py

from flask import Flask, render_template, request, jsonify
import subprocess

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/generate', methods=['POST'])
def generate_documentation():
    github_link = request.json['githubLink']

    if not isinstance(github_link, str):
        return 'invaild github link format.'
# Call the code generation script with the GitHub link
    result = subprocess.run(['python3', 'codemain.py'], input=github_link, text=True, capture_output=True)

    if result.returncode == 0:
        return result.stdout
    else:
        return 'Error occurred while generating documentation.'
if __name__ == '__main__':
    app.run(host='0.0.0.0', debug=True)


#!/usr/bin/python3
# codemain.py

import os
import subprocess
import requests
import nltk
from nltk.tokenize import sent_tokenize
import spacy

# This will download NLTK resources if not already downloaded
nltk.download('punkt')

# Load the spaCy English model
nlp = spacy.load("en_core_web_sm")

def generate_documentation(code):
    # Tokenize code into sentences
    sentences = sent_tokenize(code)

    # Perform NLP tasks on each sentence
    processed_sentences = []
    for sentence in sentences:
        doc = nlp(sentence)
        # Extract relevant information from NLP analysis
        processed_sentences.append(doc.text)  # For demonstration, just use the original sentence

    # Join processed sentences into documentation
    documentation = '\n'.join(processed_sentences)
    return documentation

def fetch_code_from_github(repo_url):
    # Extract username and repository name from the URL
    _, _, _, username, repo_name = repo_url.split('/')

    # Fetch code from GitHub API
    api_url = f"https://api.github.com/repos/{username}/{repo_name}/contents"
    response = requests.get(api_url)
    response.raise_for_status()

    # Extract and concatenate code from all files
    code = ""
    for item in response.json():
        if item['type'] == 'file' and item['name'].endswith('.py'):  # Consider Python files only
            file_url = item['download_url']
            file_content = requests.get(file_url).text
            code += file_content + '\n'

    return code

def main():
    # Get input from the user (GitHub URL or code snippet)
    user_input = input("Enter GitHub repository URL or code snippet:\n")

    if user_input.startswith("https://github.com/"):
        # Fetch code from GitHub repository
        code = fetch_code_from_github(user_input)
    else:
        # Use input as code snippet
        code = user_input

    # Generate documentation
    documentation = generate_documentation(code)

    # Write documentation to a file
    with open("documentation.txt", "w") as file:
        file.write(documentation)

    print("Documentation generated successfully!")
# Open the generated documentation file
    subprocess.run(["xdg-open", "documentation.txt"])  # Linux-specific, change as needed for other platforms

if __name__ == "__main__":
    main()


#!/usr/bin/python3
# frontend.py

import requests

def main():
    # Gets the input from the user (GitHub URL or code snippet)
    github_link = input("Enter GitHub repository URL: ")

    # Send GitHub link to Flask backend
    response = requests.post('http://localhost:5000/generate', json={'githubLink': github_link})
    print(response.text)

if __name__ == "__main__":
    main()